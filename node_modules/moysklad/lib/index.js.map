{"version":3,"sources":["../src/index.js"],"names":["stampit","require","have","getTimeString","parseTimeString","getAuthHeader","buildUrl","parseUrl","fetchUrl","GET","POST","PUT","DELETE","module","exports","methods","buildUri","console","log","parseUri","fetchUri","statics","init","options","_options","endpoint","api","apiVersion","fetch","window","bind","Error","emitter","Object","assign","getOptions"],"mappings":"AAAA;;;;;;;;AAQA;;AAEA,MAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,MAAMC,OAAOD,QAAQ,QAAR,CAAb;;AAEA;AACA,MAAME,gBAAgBF,QAAQ,uBAAR,CAAtB;AACA,MAAMG,kBAAkBH,QAAQ,yBAAR,CAAxB;AACA,MAAMI,gBAAgBJ,QAAQ,yBAAR,CAAtB;AACA,MAAMK,WAAWL,QAAQ,oBAAR,CAAjB;AACA,MAAMM,WAAWN,QAAQ,oBAAR,CAAjB;AACA,MAAMO,WAAWP,QAAQ,oBAAR,CAAjB;AACA,MAAMQ,MAAMR,QAAQ,eAAR,CAAZ;AACA,MAAMS,OAAOT,QAAQ,gBAAR,CAAb;AACA,MAAMU,MAAMV,QAAQ,eAAR,CAAZ;AACA,MAAMW,SAASX,QAAQ,kBAAR,CAAf;;AAEA;AACAY,OAAOC,OAAP,GAAiBd,QAAQ;AACvBe,WAAS;AACPV,gCADO;AAEPC,sBAFO;AAGPU,YAHO,sBAGY;AACjBC,cAAQC,GAAR,CAAY,kDAAZ;AACA,aAAO,KAAKZ,QAAL,uBAAP;AACD,KANM;;AAOPC,sBAPO;AAQPY,YARO,sBAQY;AACjBF,cAAQC,GAAR,CAAY,kDAAZ;AACA,aAAO,KAAKX,QAAL,uBAAP;AACD,KAXM;;AAYPC,sBAZO;AAaPY,YAbO,sBAaY;AACjBH,cAAQC,GAAR,CAAY,kDAAZ;AACA,aAAO,KAAKV,QAAL,uBAAP;AACD,KAhBM;;AAiBPC,YAjBO;AAkBPC,cAlBO;AAmBPC,YAnBO;AAoBPC;AApBO,GADc;AAuBvBS,WAAS;AACPlB,gCADO;AAEPC;AAFO;AAvBc,CAAR,EA4BdkB,IA5Bc,CA4BT,UAAUC,OAAV,EAAmB;AACvB,MAAIC,QAAJ;;AAEAtB,OAAKqB,OAAL,EAAc;AACZE,cAAU,SADE;AAEZC,SAAK,SAFO;AAGZC,gBAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AAVY,GAAd;;AAaA,MAAIJ,QAAQK,KAAZ,EAAmB;AACjB,SAAKA,KAAL,GAAaL,QAAQK,KAArB;AACD,GAFD,MAEO,IAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,OAAOD,KAA5C,EAAmD;AACxD,SAAKA,KAAL,GAAaC,OAAOD,KAAP,CAAaE,IAAb,CAAkBD,MAAlB,CAAb;AACD,GAFM,MAEA,IAAI,OAAOD,KAAP,KAAiB,WAArB,EAAkC;AACvC,SAAKA,KAAL,GAAaA,KAAb;AACD,GAFM,MAEA;AACL,UAAM,IAAIG,KAAJ,CAAU,+BACf,iEADK,CAAN;AAED;;AAED,MAAIR,QAAQS,OAAZ,EAAqB;AACnB,SAAKA,OAAL,GAAeT,QAAQS,OAAvB;AACD;;AAEDR,aAAWS,OAAOC,MAAP,CAAc;AACvBT,cAAU,gCADa;AAEvBC,SAAK,OAFkB;AAGvBC,gBAAY;AAHW,GAAd,EAIRJ,OAJQ,CAAX;;AAMA,OAAKY,UAAL,GAAkB,YAAY;AAC5B,WAAOX,QAAP;AACD,GAFD;AAGD,CApEc,CAAjB","file":"index.js","sourcesContent":["/*\n * moysklad\n * Клиент для JSON API МойСклад\n *\n * Copyright (c) 2017, Vitaliy V. Makeev\n * Licensed under MIT.\n */\n\n'use strict'\n\nconst stampit = require('stampit')\nconst have = require('./have')\n\n// methods\nconst getTimeString = require('./tools/getTimeString')\nconst parseTimeString = require('./tools/parseTimeString')\nconst getAuthHeader = require('./methods/getAuthHeader')\nconst buildUrl = require('./methods/buildUrl')\nconst parseUrl = require('./methods/parseUrl')\nconst fetchUrl = require('./methods/fetchUrl')\nconst GET = require('./methods/GET')\nconst POST = require('./methods/POST')\nconst PUT = require('./methods/PUT')\nconst DELETE = require('./methods/DELETE')\n\n// TODO Remove old methods\nmodule.exports = stampit({\n  methods: {\n    getAuthHeader,\n    buildUrl,\n    buildUri (...args) {\n      console.log('Warning: метод buildUri переименован в buildUrl.')\n      return this.buildUrl(...args)\n    },\n    parseUrl,\n    parseUri (...args) {\n      console.log('Warning: метод parseUri переименован в parseUrl.')\n      return this.parseUrl(...args)\n    },\n    fetchUrl,\n    fetchUri (...args) {\n      console.log('Warning: метод fetchUri переименован в fetchUrl.')\n      return this.fetchUrl(...args)\n    },\n    GET,\n    POST,\n    PUT,\n    DELETE\n  },\n  statics: {\n    getTimeString,\n    parseTimeString\n  }\n})\n  .init(function (options) {\n    let _options\n\n    have(options, {\n      endpoint: 'opt str',\n      api: 'opt str',\n      apiVersion: 'opt str'\n\n      // TODO fix have object arguments parsing\n      // login: 'opt str',\n      // password: 'opt str',\n      // fetch: 'opt function'\n      // queue: 'opt bool',\n      // emitter: 'opt obj'\n    })\n\n    if (options.fetch) {\n      this.fetch = options.fetch\n    } else if (typeof window !== 'undefined' && window.fetch) {\n      this.fetch = window.fetch.bind(window)\n    } else if (typeof fetch !== 'undefined') {\n      this.fetch = fetch\n    } else {\n      throw new Error('Не указан Fetch API модуль' +\n       ' (cм. подробнее https://github.com/wmakeev/moysklad#Установка).')\n    }\n\n    if (options.emitter) {\n      this.emitter = options.emitter\n    }\n\n    _options = Object.assign({\n      endpoint: 'https://online.moysklad.ru/api',\n      api: 'remap',\n      apiVersion: '1.1'\n    }, options)\n\n    this.getOptions = function () {\n      return _options\n    }\n  })\n"]}