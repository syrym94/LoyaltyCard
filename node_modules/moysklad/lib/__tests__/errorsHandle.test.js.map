{"version":3,"sources":["../../src/__tests__/errorsHandle.test.js"],"names":["test","require","Moysklad","t","plan","ms","PUT","foo","catch","err","equal","message","code","POST","id","muteErrors","then","res","ok","Array","every","i","errors"],"mappings":"AAAA;;AAEA,MAAMA,OAAOC,QAAQ,WAAR,CAAb;AACA,MAAMC,WAAWD,QAAQ,IAAR,CAAjB;;AAEAD,KAAK,WAAL,EAAkBG,KAAK;AACrBA,IAAEC,IAAF,CAAO,CAAP;;AAEA,QAAMC,KAAKH,UAAX;;AAEAG,KAAGC,GAAH,CAAO,gBAAP,EAAyB;AACvBC,SAAK;AADkB,GAAzB,EAEGC,KAFH,CAESC,OAAO;AACdN,MAAEO,KAAF,CAAQD,IAAIE,OAAZ,EAAqB,iCAArB;AACAR,MAAEO,KAAF,CAAQD,IAAIG,IAAZ,EAAkB,IAAlB;AACD,GALD;AAMD,CAXD;;AAaAZ,KAAK,YAAL,EAAmBG,KAAK;AACtBA,IAAEC,IAAF,CAAO,CAAP;;AAEA,QAAMC,KAAKH,UAAX;;AAEAG,KAAGQ,IAAH,CAAQ,gBAAR,EAA0B,CACxB,EAAEN,KAAK,MAAP,EADwB,EAExB,EAAEO,IAAI,QAAN,EAAgBP,KAAK,MAArB,EAFwB,CAA1B,EAGGC,KAHH,CAGSC,OAAO;AACdN,MAAEO,KAAF,CAAQD,IAAIE,OAAZ,EACE,iFADF;AAEAR,MAAEO,KAAF,CAAQD,IAAIG,IAAZ,EAAkB,IAAlB;AACD,GAPD;AAQD,CAbD;;AAeAZ,KAAK,4BAAL,EAAmCG,KAAK;AACtCA,IAAEC,IAAF,CAAO,CAAP;;AAEA,QAAMC,KAAKH,UAAX;;AAEAG,KAAGQ,IAAH,CAAQ,gBAAR,EAA0B,CACxB,EAAEN,KAAK,MAAP,EADwB,EAExB,EAAEO,IAAI,QAAN,EAAgBP,KAAK,MAArB,EAFwB,CAA1B,EAGG,IAHH,EAGS,EAAEQ,YAAY,IAAd,EAHT,EAG+BC,IAH/B,CAGoCC,OAAO;AACzCd,MAAEe,EAAF,CAAKD,eAAeE,KAApB;AACAhB,MAAEe,EAAF,CAAKD,IAAIG,KAAJ,CAAUC,KAAKA,EAAEC,MAAF,YAAoBH,KAAnC,CAAL;AACD,GAND;AAOD,CAZD","file":"errorsHandle.test.js","sourcesContent":["'use strict'\n\nconst test = require('blue-tape')\nconst Moysklad = require('..')\n\ntest('PUT error', t => {\n  t.plan(2)\n\n  const ms = Moysklad()\n\n  ms.PUT('entity/product', {\n    foo: 'bar'\n  }).catch(err => {\n    t.equal(err.message, 'Не указан идентификатор объекта')\n    t.equal(err.code, 1012)\n  })\n})\n\ntest('POST error', t => {\n  t.plan(2)\n\n  const ms = Moysklad()\n\n  ms.POST('entity/product', [\n    { foo: 'bar1' },\n    { id: 'not-id', foo: 'bar2' }\n  ]).catch(err => {\n    t.equal(err.message,\n      'Ошибка сохранения объекта: поле \\'name\\' не может быть пустым или отсутствовать')\n    t.equal(err.code, 3000)\n  })\n})\n\ntest('POST error with muteErrors', t => {\n  t.plan(2)\n\n  const ms = Moysklad()\n\n  ms.POST('entity/product', [\n    { foo: 'bar1' },\n    { id: 'not-id', foo: 'bar2' }\n  ], null, { muteErrors: true }).then(res => {\n    t.ok(res instanceof Array)\n    t.ok(res.every(i => i.errors instanceof Array))\n  })\n})\n"]}